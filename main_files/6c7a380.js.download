(window.webpackJsonp=window.webpackJsonp||[]).push([[286,214],{1775:function(e,t,n){},1919:function(e,t,n){"use strict";n(1775)},2012:function(e,t,n){"use strict";n.r(t);n(9),n(12),n(11),n(13),n(7),n(14);var r=n(19),o=n(20),c=n(3),l=(n(33),n(69),n(42),n(28),n(72)),d=n(2e3),f=n(10),N=n(71);function h(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var _=Object(f.b)({setup:function(){var e=Object(f.p)().store,t=Object(N.a)().isMobile,n=Object(f.a)((function(){return e.getters["courses/courseSummary"]}));return Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch("notes/fetchNotes",{courseId:n.value.id});case 2:case"end":return t.stop()}}),t)})))(),{isMobile:t}},data:function(){return{isSidebarOpened:!1,deleteCandidates:[],searchNote:""}},computed:v(v(v(v(v({},Object(l.c)("lectures-sidebar",["isNotesOpened"])),Object(l.c)("notes",["lectureNotes","query","notesLoading","isCreatingNote","isEditingNote"])),Object(l.c)("lectures",["getCurrentLecture"])),Object(l.c)("courses",{courseSummary:"courseSummary"})),{},{isCoursePage:function(){return"courses"===this.$route.path.split("/")[1]},notes:function(){var e=this.allNotes,t=Object(r.a)(e).reverse();return this.searchNote?Object(d.a)(this.searchNote,e,{fuseOptions:{keys:["html"]}}).results.value.map((function(e){return e.item})):t},allNotes:function(){return this.isCoursePage?this.query({courseId:this.courseSummary.id}):this.lectureNotes(this.getCurrentLecture.id)},newNote:function(){return{anchor:void 0,deleted:void 0,files:[],html:"",lecture:this.getCurrentLecture,position:void 0,quote:"",timecode:void 0}},isMobileNotes:function(){return this.isNotesOpened&&this.isMobile}}),watch:{isMobileNotes:function(e){this.setPopupState(e)}},methods:v(v(v(v({},Object(l.b)("lectures-sidebar",["setNotesOpened"])),Object(l.b)("notes",["fetchNotes","createNote","setCreatinNote","setEditingNote","updateNote","deleteNote","restoreNote"])),Object(l.b)("app",["setPopupState"])),{},{editingNote:function(e){this.setEditingNote(e)},deleteNoteCancel:function(e){this.restoreNote({noteId:e})},deleteNoteTemporary:function(e){this.deleteNote({noteId:e})},saveNote:function(e){this.updateNote({note:e})},createNewNote:function(e){var t=this;return Object(c.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.setCreatinNote(!1),!e){n.next=4;break}return n.next=4,t.createNote({lecture:e.lecture,arg:{html:e.html,quote:e.quote}});case 4:case"end":return n.stop()}}),n)})))()},addFirstNote:function(){this.setCreatinNote(!0)},addNote:function(){this.setCreatinNote(!0),this.scrollToTop()},scrollToTop:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r,dialog,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$refs.noteSidebar){t.next=10;break}return r=e.$refs.noteSidebar,dialog=r.$children[0],o=null===(n=dialog.$children[0])||void 0===n?void 0:n.$children[0].$el,c=null==o?void 0:o.querySelector(".scrollarea__container"),t.next=7,e.$nextTick();case 7:return t.next=9,e.$nextTick();case 9:c&&(c.scrollTop=0);case 10:case"end":return t.stop()}}),t)})))()}})}),m=(n(1919),n(0)),component=Object(m.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ESidebar",{ref:"noteSidebar",staticClass:"note-sidebar",attrs:{"outside-close":!1,value:e.isNotesOpened},on:{hide:function(t){return e.setNotesOpened(!1)}},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"note-sidebar__title"},[e._v("\n      "+e._s(e.$t("lesson.my notes"))+"\n    ")]),e._v(" "),!e.notesLoading&&e.allNotes.length>0?n("ETextField",{staticClass:"note-sidebar__search",attrs:{size:"m",placeholder:e.$t("notes.search")},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("EX24icsearch")]},proxy:!0}],null,!1,3278551823),model:{value:e.searchNote,callback:function(t){e.searchNote=t},expression:"searchNote"}}):e._e()]},proxy:!0},!e.notesLoading&&e.allNotes.length>0&&e.notes.length||e.isCreatingNote?{key:"default",fn:function(){return[e.isCreatingNote?n("NoteCard",{attrs:{"is-new-note":!0,note:e.newNote},on:{createNewNote:e.createNewNote}}):e._e(),e._v(" "),e._l(e.notes,(function(t){return n("NoteCard",{key:t.id,ref:"note_"+t.id,refInFor:!0,attrs:{note:t},on:{editing:e.editingNote,saveNote:e.saveNote,deleteNoteCancel:e.deleteNoteCancel,deleteNote:e.deleteNoteTemporary}})}))]},proxy:!0}:null,{key:"footer",fn:function(){return[(e.allNotes.length>0||e.searchNote.length>0)&&!e.isCoursePage?n("EBtn",{staticClass:"note-sidebar__footer-button",attrs:{color:"secondary",size:"m","full-width":!0,disable:e.notesLoading||e.isCreatingNote||e.isEditingNote},on:{click:e.addNote}},[e._v("\n      "+e._s(e.$t("notes.addNote"))+"\n    ")]):e._e()]},proxy:!0}],null,!0)},[e._v(" "),e._v(" "),e.notesLoading||e.notes.length||!e.searchNote.length?e._e():[n("div",{staticClass:"note-sidebar__not-found"},[e._v("\n      "+e._s(e.$t("notes.notFound"))+"\n    ")])],e._v(" "),e.notesLoading||e.allNotes.length||e.searchNote.length?e._e():[n("div",{staticClass:"note-sidebar__empty"},[e._v("\n      "+e._s(e.$t("notes.emptyText"))+"\n      "),e.isCoursePage?e._e():n("EBtn",{staticClass:"note-sidebar__create-button",attrs:{size:"m",color:"secondary","full-width":""},on:{click:e.addFirstNote}},[e._v("\n        "+e._s(e.$t("notes.addFirstNote"))+"\n      ")])],1)],e._v(" "),e.notesLoading?[n("EInnerLoading",{attrs:{showing:!0},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n        "+e._s(e.$t("notes.loading"))+"\n      ")]},proxy:!0}],null,!1,4228834636)})]:e._e()],2)}),[],!1,null,"3c4e918a",null);t.default=component.exports;installComponents(component,{EX24icsearch:n(468).default,ETextField:n(272).default,NoteCard:n(2093).default,EBtn:n(120).default,EInnerLoading:n(435).default,ESidebar:n(992).default})},2442:function(e,t,n){"use strict";n.r(t);var r=n(10),o=Object(r.b)({setup:function(){var e=Object(r.p)().store;return{courseSummary:Object(r.a)((function(){return e.getters["courses/courseSummary"]}))}}}),c=n(0),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page page-courses"},[e.courseSummary.id?n("NoteSidebar"):e._e(),e._v(" "),n("NuxtChild")],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{NoteSidebar:n(2012).default})}}]);